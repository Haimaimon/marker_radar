# Render.com deployment configuration
# This file allows easy deployment to Render.com

services:
  # Background Worker (runs 24/7)
  - type: worker
    name: market-radar-bot
    env: python
    region: oregon  # or frankfurt for EU
    plan: free
    
    # Build settings
    buildCommand: pip install -r requirements.txt
    
    # Start command
    startCommand: python app.py
    
    # Auto-deploy on push
    autoDeploy: true
    
    # Environment variables (set these in Render dashboard)
    envVars:
      - key: PYTHON_VERSION
        value: 3.11.0
      
      # General Settings
      - key: POLL_SECONDS
        value: 30
      - key: MIN_IMPACT_SCORE
        value: 70
      - key: VERBOSE_LOGGING
        value: true
      - key: ONLY_TODAY_NEWS
        value: true
      - key: AUTO_CLEANUP_OLD_NEWS
        value: true
      
      # Market Data
      - key: ENABLE_MARKET_VALIDATION
        value: true
      - key: MIN_GAP_PCT
        value: 0.5
      - key: MIN_VOL_SPIKE
        value: 1.0
      
      # Ticker Filtering
      - key: ENABLE_TICKER_FILTER
        value: true
      
      # APIs (set via Render dashboard as secrets)
      - key: FINNHUB_API_KEY
        sync: false  # Mark as secret in Render
      - key: ENABLE_FINNHUB
        value: true
      
      # Telegram (set via Render dashboard as secrets)
      - key: TELEGRAM_BOT_TOKEN
        sync: false  # Mark as secret in Render
      - key: TELEGRAM_CHAT_ID
        sync: false  # Mark as secret in Render
      - key: ENABLE_TELEGRAM
        value: true
      
      # SEC
      - key: ENABLE_SEC_FILTERED
        value: true
      - key: ENABLE_SEC_LEGACY
        value: false
      
      # Optional APIs (disabled by default)
      - key: ENABLE_POLYGON
        value: false
      - key: ENABLE_ALPHA_VANTAGE
        value: false
      - key: ENABLE_THENEWSAPI
        value: false
      - key: ENABLE_NEWSAPI_AI
        value: false
    
    # Health check
    healthCheckPath: /

# Databases (if needed in future)
# databases:
#   - name: market-radar-db
#     plan: free
#     databaseName: market_radar
#     user: market_radar_user
